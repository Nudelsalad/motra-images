FROM python:3.12-alpine

LABEL org.opencontainers.image.source="motra-images" \
      org.opencontainers.image.description="OPC UA DoS attacker for node-opcua CVE-2022-21208 (missing chunk limit)" \
      org.opencontainers.image.licenses="MIT"

# Minimal runtime, no extra deps needed
WORKDIR /opt/app

COPY app/ ./app/
COPY startup.sh ./startup.sh

RUN chmod +x ./startup.sh

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

ENTRYPOINT ["/opt/app/startup.sh"]
